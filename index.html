<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Happy Birthday</title>
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    html, body {
      margin: 0; padding: 0; height: 100%; background: black;
      overflow-x: hidden; font-family: 'Segoe UI', sans-serif;
      color: white; -webkit-tap-highlight-color: transparent;
    }
    canvas {
      position: absolute; top: 0; left: 0; z-index: 0;
      pointer-events: none;
    }
    #mainContent { display: none; }
    .card-container {
      position: relative; z-index: 2;
      display: flex; flex-direction: column; align-items: center;
      gap: 1rem; padding: 2rem 1rem; margin-top: 5vh;
    }
    .card {
      background: rgba(255,255,255,0.08); backdrop-filter: blur(8px);
      border-radius:20px; width:90%; max-width:500px; height:90px;
      padding:1rem; text-align:center; cursor: pointer;
      transition: height 0.6s ease, transform 0.6s ease, padding 0.6s ease;
      overflow:hidden; position:relative; box-shadow:0 0 15px rgba(255,255,255,0.08);
    }
    .card h3 { margin:0; font-size:1rem; }
    .card p {
      opacity:0; pointer-events:none; transition:opacity 0.4s ease;
      margin-top:1rem; line-height:1.5; white-space:pre-wrap;
    }
    .card.expanded { transform: scale(1.03); padding:2rem 1.5rem; }
    .card.expanded p { opacity:1; pointer-events:auto; }

    #lockOverlay {
      position:fixed; inset:0;
      background:rgba(255,255,255,0.04);
      backdrop-filter: blur(12px);
      z-index:9998;
      display:flex; flex-direction:column; justify-content:center; align-items:center;
      text-align:center; padding:2rem; font-size:1.2rem;
      transition: opacity 0.8s ease;
    }
    #countdown {
      font-size:2rem; margin-top:1rem;
      font-weight:bold; letter-spacing:1px;
    }

    #birthdayOverlay {
      position:fixed; inset:0;
      background:rgba(255,255,255,0.05);
      backdrop-filter:blur(16px);
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      z-index:9999;
      opacity: 0;
      transform: translateY(100%);
      transition: opacity 1.2s ease, transform 1.2s ease;
      cursor: pointer;
    }
    #birthdayOverlay.show {
      opacity: 1;
      transform: translateY(0);
    }
    #birthdayOverlay.hide {
      opacity: 0;
      transform: translateY(-100%);
    }
    #birthdayText {
      font-size: 3.2rem;
      font-family: 'Caveat', cursive;
      text-align: center;
      padding: 0 2rem;
      animation: floatBounce 2s ease-in-out infinite;
    }
    @keyframes floatBounce {
      0%,100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    @media (max-width:600px){
      .card { height:90px; padding:0.8rem; }
      .card h3 { font-size:0.95rem; }
      #birthdayText { font-size: 2.5rem; }
    }
  </style>
</head>
<body>

  <div id="lockOverlay">
    Just a little longer, pookie... ğŸ
    <div id="countdown">Loading...</div>
  </div>

  <div id="birthdayOverlay">
    <div id="birthdayText">Happy Birthday ğŸ‰</div>
  </div>

  <div id="mainContent">
    <canvas id="cosmicCanvas"></canvas>
    <div class="card-container">
      <div class="card" onclick="expandCard(this)">
        <h3>For You ğŸ’Œ</h3>
        <p>
Happy Birthday, pookie ğŸ¼ğŸ‚ğŸ’–  
Itâ€™s your day â€” no stress, no rush. Just soft smiles, your favorite things...  
Eat well, take selfies, laugh loudly. Hereâ€™s to more of what feels like home ğŸ’˜ğŸ‘‘
        </p>
      </div>
      <div class="card" onclick="expandCard(this)">
        <h3>Something Sweet ğŸ°</h3>
        <p>
Hope today wraps around you like comfort.  
So let today be about you â€” what makes you laugh, feel seen...  
You deserve it all ğŸ’˜ğŸ€ğŸ‘‘
        </p>
      </div>
      <div class="card" onclick="expandCard(this)">
        <h3>Birthday Magic âœ¨</h3>
        <p>
Another year of youâ€”always worth celebrating ğŸ’«  
This day is yours. And this year? Itâ€™ll return the love you give ğŸ’˜ğŸ‘‘  
Happy Birthday, cutie ğŸ¼ğŸ‚ğŸ‰ğŸ’–
        </p>
      </div>
    </div>
  </div>

  <script>
    const emojiList = ['ğŸ‰','ğŸ‚','ğŸ','ğŸˆ','ğŸ°','ğŸ«','ğŸ¬','â¤ï¸','âœ¨','ğŸ¥³','ğŸŒ¸','ğŸŒ¹','ğŸ€','ğŸŠ','ğŸ’–'];
    const canvas = document.getElementById('cosmicCanvas'),
          ctx = canvas.getContext('2d');
    let width, height, dpr = window.devicePixelRatio || 1;
    const isMobile = window.innerWidth < 768;
    const ITEM_COUNT = isMobile ? 240 : 400;
    let items = [], emojiImages = {};

    function resizeCanvas(){
      width = window.innerWidth;
      height = window.innerHeight;
      canvas.width = width * dpr;
      canvas.height = height * dpr;
      canvas.style.width = width+'px';
      canvas.style.height = height+'px';
      ctx.setTransform(dpr,0,0,dpr,0,0);
    }

    function renderEmojiToImage(e,s){
      const off=document.createElement('canvas'),
            c=off.getContext('2d');
      off.width=off.height=s*2;
      c.scale(2,2);
      c.font=`${s}px "Segoe UI Emoji", sans-serif`;
      c.textAlign='center'; c.textBaseline='middle';
      c.fillText(e,s/2,s/2);
      return off;
    }

    function generateEmojiImages(){
      emojiImages={};
      const [min,max] = isMobile?[10,14]:[14,24];
      for(let e of emojiList){
        emojiImages[e]={};
        for(let s=min; s<=max; s+=2){
          emojiImages[e][s]=renderEmojiToImage(e,s);
        }
      }
    }

    function createItems(){
      items=[];
      for(let i=0;i<ITEM_COUNT;i++){
        const e = emojiList[Math.floor(Math.random()*emojiList.length)];
        const size = isMobile ? (Math.floor(Math.random()*3)*2+10) : (Math.floor(Math.random()*6)*2+14);
        items.push({emoji:e,size,x:Math.random()*width,y:Math.random()*height,speed:Math.random()*0.5+0.25,alpha:Math.random()*0.5+0.5});
      }
    }

    function draw(){
      ctx.clearRect(0,0,width,height);
      for(let it of items){
        const img = emojiImages[it.emoji][it.size];
        ctx.globalAlpha = it.alpha;
        ctx.drawImage(img,it.x,it.y,it.size,it.size);
        it.y += it.speed;
        if(it.y > height+it.size){
          it.y = -it.size;
          it.x = Math.random()*width;
          it.emoji = emojiList[Math.floor(Math.random()*emojiList.length)];
          it.size = isMobile ? (Math.floor(Math.random()*3)*2+10) : (Math.floor(Math.random()*6)*2+14);
        }
      }
      ctx.globalAlpha = 1;
    }

    function animate() {
      draw();
      requestAnimationFrame(animate);
    }

    resizeCanvas();
    generateEmojiImages();
    createItems();
    animate();

    window.addEventListener('resize',()=>{
      resizeCanvas();
      generateEmojiImages();
      createItems();
    });

    function expandCard(card){
      const expanded = card.classList.contains('expanded');
      document.querySelectorAll('.card.expanded').forEach(c=>{ if(c!==card) collapseCard(c); });
      expanded ? collapseCard(card) : expand(card);
    }

    function expand(card){
      card.style.height = card.scrollHeight + 'px';
      card.classList.add('expanded');
      requestAnimationFrame(()=>{ card.style.height = card.scrollHeight + 'px'; });
    }

    function collapseCard(card){
      const ch = card.scrollHeight;
      card.style.height = ch + 'px';
      requestAnimationFrame(()=>{
        card.style.height = '90px';
        setTimeout(()=>card.classList.remove('expanded'),600);
      });
    }

    document.addEventListener('contextmenu',e=>e.preventDefault());

    function checkTimeIST() {
      const now = new Date();
      const offset = 330 + now.getTimezoneOffset(); // IST offset
      return new Date(now.getTime() + offset * 60000);
    }

    function updateCountdown() {
      const now = checkTimeIST();
      const target = new Date(now);
      target.setHours(23, 50, 53, 0);

      const diff = target - now;
      if (diff <= 0) {
        triggerBirthday();
        return;
      }

      const hrs = String(Math.floor(diff / 3600000)).padStart(2, '0');
      const mins = String(Math.floor((diff % 3600000) / 60000)).padStart(2, '0');
      const secs = String(Math.floor((diff % 60000) / 1000)).padStart(2, '0');
      document.getElementById('countdown').textContent = `${hrs}:${mins}:${secs}`;
    }

    let hasTriggered = false;

    function triggerBirthday() {
      if (hasTriggered) return;
      hasTriggered = true;
      document.getElementById('lockOverlay').style.display = 'none';
      document.getElementById('birthdayOverlay').classList.add('show');
    }

    document.getElementById('birthdayOverlay').addEventListener('click', ()=>{
      document.getElementById('birthdayOverlay').classList.add('hide');
      document.getElementById('mainContent').style.display = 'block';
    });

    updateCountdown();
    setInterval(updateCountdown, 1000);
  </script>
</body>
</html>
